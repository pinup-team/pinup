<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<th:block layout:fragment="pageStyles">
    <link rel="stylesheet" th:href="@{/css/store_detail.css}"/>
</th:block>

<div layout:fragment="content" th:object="${store}">

    <div sec:authorize="isAuthenticated() and hasRole('ROLE_ADMIN')">
        <a th:href="@{/stores/{id}/update(id=${store.id})}">ÏàòÏ†ï</a>
        <!--        <button class="delete-btn" th:data-store-id="*{id}">ÏÇ≠Ï†ú</button>-->
        <a th:href="@{/stores/create}" class="create-btn" th:data-store-id="*{id}">Îì±Î°ù</a>
    </div>

    <!--    <a href="/stores">Î™©Î°ùÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</a>-->

    <input type="hidden" id="storeId" th:value="${store.id}">

    <!-- Ìôà ÎîîÎ∏å-->
    <div>
        <!-- Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îçî -->
        <div class="carousel-wrapper">
            <div class="carousel">
                <div class="carousel-inner">
                    <ul class="carousel-list">
                        <th:block th:each="image : ${storeImages}">
                            <li class="carousel-item">
                                <img th:src="${image.imageUrl}" alt="Store Image"/>
                            </li>
                        </th:block>
                    </ul>
                </div>

                <button class="slide-button slide-left"><</button>
                <button class="slide-button slide-right">></button>
            </div>
        </div>

        <!-- Ìé∏ÏùòÍ∏∞Îä• Î∞î -->
        <div>
            <a href="/stores"><</a>
        </div>

        <!-- ÌÉ≠ Î≤ÑÌäº -->
        <ul class="tab-list">
            <li class="tab-item active" data-tab="info">
                <a href="#" onclick="changeTab('info')">
                    <span class="tab_text">Ï†ïÎ≥¥</span>
                </a>
            </li>
            <li class="tab-item" data-tab="media">
                <a href="#" onclick="changeTab('media')">
                    <span class="tab_text">ÎØ∏ÎîîÏñ¥</span>
                </a>
            </li>
            <li class="tab-item" data-tab="post">
                <a href="#" onclick="changeTab('post')">
                    <span class="tab_text">Í≤åÏãúÌåê</span>
                </a>
            </li>
        </ul>

        <!-- ÌÉ≠ ÎÇ¥Ïö© -->
        <div id="tab-content-area">
            <div id="tab-info" class="tab-content active">
                <div class="title-area">
                    <p class="title-text-category" th:text="*{category.name}"> ></p>
                    <p class="title-text-name" th:text="*{name}"></p>
                    <span class="title-text-duration" th:text="*{startDate()}"></span> ~ <span
                        class="title-text-duration"
                        th:text="*{endDate()}"></span>
                    <p class="title-text-location" th:with="loc=*{location}">
                        üìç <span
                            th:text="${loc.state} + ' ' + ${loc.district} + ' ' + ${loc.address} +' ' +  ${loc.addressDetail}"></span>
                    </p>
                </div>
                <br>
                <div class="info-container">
                    <div class="duration-container">
                        <p class="info-subtitle"> Ïö¥ÏòÅÏãúÍ∞Ñ </p>
                        <div>
                            <p th:if="*{operatingHours.isEmpty()}">Ïö¥ÏòÅÏãúÍ∞Ñ Ï§ÄÎπÑ Ï§ë</p>

                            <ul th:unless="*{operatingHours.isEmpty()}">
                                <li th:each="hour : *{operatingHours}">
                                    <span th:text="${hour.day}"></span> :
                                    <span th:text="${#temporals.format(hour.startTime, 'HH:mm')}"></span> ~
                                    <span th:text="${#temporals.format(hour.endTime, 'HH:mm')}"></span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="description-container">
                        <p class="info-subtitle"> ÏÉÅÏÑ∏ÏÑ§Î™Ö </p>
                        <p class="description-textbox" th:text="*{description}"></p>
                    </div>

                    <div class="map-container">
                        <input type="hidden" id="latitude-hidden" th:value="${location.latitude}">
                        <input type="hidden" id="longitude-hidden" th:value="${location.longitude}">
                        <div id="map" class="map-box"></div>
                        <div>
                            <p class="map-text-location" th:with="loc=*{location}">
                                üìç <span
                                    th:text="${loc.state} + ' ' + ${loc.district} + ' ' + ${loc.address} +' ' +  ${loc.addressDetail}"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-media" class="tab-content">
                <!-- ÎØ∏ÎîîÏñ¥ ÌÉ≠: Ïà®Í≤®ÏßÑ ÏÉÅÌÉú -->
                <p>ÌòÑÏû¨ Ï§ÄÎπÑ Ï§ëÏù∏ Í∏∞Îä•ÏûÖÎãàÎã§.</p>
            </div>

            <div id="tab-post" class="tab-content">
                <!-- Í≤åÏãúÌåê ÌÉ≠: Ïà®Í≤®ÏßÑ ÏÉÅÌÉú -->
                <div id="post-list-container" style="display:none;"></div>
            </div>
        </div>
    </div>
</div>

<th:block layout:fragment="pageScripts">
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=1038c510f5de135a5c0d54f4f9181ef3&libraries=services"></script>
    <script th:src="@{/js/location.js}"></script>
    <script th:src="@{/js/store.js}"></script>
</th:block>
</html>
