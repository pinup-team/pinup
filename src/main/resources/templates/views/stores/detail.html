<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head>
    <meta charset="UTF-8">
    <title>ÌåùÏóÖÏä§ÌÜ†Ïñ¥ ÏÉÅÏÑ∏ Ï†ïÎ≥¥</title>

    <script defer src="/js/store.js"></script>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=1038c510f5de135a5c0d54f4f9181ef3&libraries=services"></script>
</head>
<div layout:fragment="content" th:object="${store}">

    <div class="home_content_wrap">
        <div class="content_list_bridge">
            <div class="content_list_area" style="transition: 0.3s;">
                <div class="carousel-wrapper">
                    <div class="carousel" data="0">
                        <div class="carousel-inner">
                            <ul class="carousel-list">
                                <th:block th:each="image : ${storeImages}">
                                    <li class="carousel-item"><img th:src="${image.imageUrl}" alt="Store Image"/></li>
                                </th:block>

                            </ul>
                            <div class="slide slide-left" style="display: none;">
                                <button class="transparent-button">‚¨ÖÔ∏è</button>
                            </div>
                            <div class="slide slide-right">
                                <button class="transparent-button">‚û°Ô∏è</button>
                            </div>
                        </div>
                        <footer class="pinup-carousel-indicators">
                            <th:block th:each="image, iterStat : ${storeImages}">
                                <div th:classappend="${iterStat.index == 0} ? 'active' : ''"
                                     class="pinup-indicator"></div>
                            </th:block>
                        </footer>
                    </div>
                </div>
                <!-- 2)2Î≤àÏß∏ TAB -->
                <ul role="tablist">
                    <li th:class="info" role="tab" aria-selected="true">
                        <a href="#" th:attr="onclick=|changeTab('info', '${store.id}')|">
                            <span class="tab_text">Ï†ïÎ≥¥</span>
                        </a>
                    </li>
                    <li th:class="post-list" role="tab" aria-selected="false">
                        <a href="#" th:attr="onclick=|changeTab('post/list', '${store.id}')|">
                            <span class="tab_text">Í≤åÏãúÌåê</span>
                        </a>
                    </li>
                </ul>
                <!-- Ï†ïÎ≥¥Í∞Ä Ïó¨Í∏∞Ïóê Î°úÎìúÎê©ÎãàÎã§ -->

                <div id="slide-bottom" class="slide_bottom" style="display:block;">
                    <div style="flex: 5">
                        <h1 th:text="*{name}"></h1>
                        <p th:text="*{description}"></p>
                        <p>Ïπ¥ÌÖåÍ≥†Î¶¨: <span th:text="*{category.name}"></span></p>
                        <p th:with="loc=*{location}">ÏúÑÏπò: <span
                                th:text="${loc.state} + ' ' + ${loc.district} + ' ' + ${loc.address} +' ' +  ${loc.addressDetail}"></span>
                        </p>
                        <p>ÏãúÏûë ÎÇ†Ïßú: <span th:text="*{startDate}"></span></p>
                        <p>Ï¢ÖÎ£å ÎÇ†Ïßú: <span th:text="*{endDate}"></span></p>
                    </div>
                </div>
                <div style="flex: 4">
                    <!-- ÏßÄÎèÑ  -->
                    <div>
                        <div>
                            <span id="detailTitle">üìå&nbsp;ÏúÑÏπò</span>
                            <h1>Îß§Ïû•Ï†ïÎ≥¥</h1>
                            <div>Ïò§ÌîÑÎùºÏù∏ Îß§Ïû•ÎèÑ Î∞©Î¨∏Ìï¥Î≥¥ÏÑ∏Ïöî~</div>
                        </div>
                        <div style="width: 500px; display: flex; justify-content: flex-start;flex-wrap: wrap; flex-direction: column; align-items: left">
                            <div class="form-group">
                                <label>Îß§Ïû•Î™Ö:</label>
                                <span id="store-name" th:utext="'<strong>' + ${store.name} + '</strong>'"></span>

                                <label>Ï£ºÏÜå:</label>
                                <span id="store-address"
                                      th:utext="'<strong>' + ${location.address} + '</strong>'"></span>
                            </div>
                        </div>
                        <!-- Ïà®Í≤®ÏßÑ Í∞í -->
                        <input type="hidden" id="latitude-hidden" th:value="${location.latitude}">
                        <input type="hidden" id="longitude-hidden" th:value="${location.longitude}">
                        <div id="map"
                             style="width: 700px; height: 400px; border-radius: 10px; border: 1px solid #e7e7e7;box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.24);"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Í≤åÏãúÌåê Î¶¨Ïä§Ìä∏Í∞Ä Ïó¨Í∏∞Ïóê Î°úÎìúÎê©ÎãàÎã§ -->
<div id="post-list-container" style="display:none;"></div>

<a th:href="@{/stores/{id}/update(id=${store.id})}">ÏàòÏ†ï</a>
<button class="delete-btn" th:data-store-id="*{id}">ÏÇ≠Ï†ú</button>
<a href="/stores">Î™©Î°ùÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</a>
</div>

<th:block layout:fragment="pageScripts">
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script th:src="@{/js/location.js}"></script>
    <script th:src="@{/js/store.js}"></script>
</th:block>
</html>
